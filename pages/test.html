<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chỉnh sửa nhân viên</title>
  <!-- Import thư viện jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>
<body>

  <form id="employeeForm">
    <!-- Các trường thông tin khác -->
    
    <label for="department">Phòng ban:</label>
    <select id="department" name="department"></select>

    <button type="button" onclick="submitForm()">Gửi thông tin</button>
  </form>

  <script>
    // Gọi ajax để lấy dữ liệu từ API sử dụng jQuery
    $.ajax({
        url: 'https://localhost:7159/api/v1/Employees/employees',
        type: 'GET',
        success: function(response) {
            // Chuyển đổi dữ liệu JSON thành đối tượng JavaScript
            var departmentData = response;

            // Hàm để hiển thị thông tin phòng ban trong combobox
            function displayDepartments() {
                var departmentSelect = $('#department');
                var uniqueDepartmentNames = []; // Mảng tạm để lưu trữ các giá trị không trùng lặp

                // Điền combobox từ danh sách đối tượng phòng ban
                $.each(departmentData, function(index, department) {
                    // Kiểm tra xem giá trị đã tồn tại trong mảng chưa
                    if (uniqueDepartmentNames.indexOf(department.DepartmentName) === -1) {
                        uniqueDepartmentNames.push(department.DepartmentName); 
                        // Nếu chưa tồn tại, thêm vào mảng
                        departmentSelect.append('<option value="' + department.DepartmentId + '">' + department.DepartmentName + '</option>');
                    }
                });
            }

            // Gọi hàm để hiển thị thông tin phòng ban khi trang được tải
            displayDepartments();
        }
    });

    function submitForm() {
        // Lấy giá trị phòng ban đã chọn từ combobox
        var selectedDepartment = $('#department').val();

        // Gửi thông tin đến server hoặc xử lý dữ liệu theo nhu cầu của bạn
        console.log('Phòng ban đã chọn:', selectedDepartment);
    }
</script>


</body>
</html>
